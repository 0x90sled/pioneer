
model(spacestation_door, scale=1.0, radius=200.0) {
	a = v(-100,0,50)
	b = v(100,0,50)
	c = v(100,0,-50)
	d = v(-100,0,-50)
	quad(a,b,c,d)
	quad(d,c,b,a)
	material(.8,.8,0, 0,0,0, 0, 0,0,0)
	zbias(v(0,0,0), v(0,1,0), 1)
	# diagonal stripes on front
	quad(v(-10,0,-20), v(-30,0,-20), v(-70,0,20), v(-50,0,20))
	quad(v(30,0,-20), v(10,0,-20), v(-30,0,20), v(-10,0,20))
	quad(v(70,0,-20), v(50,0,-20), v(10,0,20), v(30,0,20))
	# on back
	zbias(v(0,0,0), v(0,-1,0), 1)
	quad(v(10,0,-20), v(30,0,-20), v(70,0,20), v(50,0,20))
	quad(v(-30,0,-20), v(-10,0,-20), v(30,0,20), v(10,0,20))
	quad(v(-70,0,-20), v(-50,0,-20), v(-10,0,20), v(-30,0,20))
	nozbias()
}	

# final resting place of docked ship
model(spacestation_entry1_stage3, scale=1.0, radius=300.0) {
	lod { full, 20px }
	# mark as non-colliding (all >= 0x8000 is)
	geomflag(0x9000)
	a = v(-100,200,50)
	b = v(100,200,50)
	c = v(100,200,-50)
	d = v(-100,200,-50)
	a2 = v(-100,0,50)
	b2 = v(100,0,50)
	c2 = v(100,0,-50)
	d2 = v(-100,0,-50)
	material(.8,.8,.8, 0,0,0, 0, 0,0,0)
	quad(a,b,b2,a2)
	material(.8,0,.8, 0,0,0, 0, 0,0,0)
	quad(c,d,d2,c2)
	quad(d,c,b,a)
	xref:quad(b,c,c2,b2)
	material(1,1,1, 0,0,0, 0, 0,0,0)
	
	# adverts
	lod1:subobject(var:16, v(0,200,0), v(0,0,-1), v(0,-1,0), scale=40.0)
	lod1:subobject(var:17, v(-100,100,0), v(0,0,-1), v(1,0,0), scale=40.0)
	lod1:subobject(var:18, v(100,100,0), v(0,0,-1), v(-1,0,0), scale=40.0)
	
	zbias(v(0,200,0), v(0,-1,0), 1)
	# starport name
	text(params:0, v(60,200,-35), v(0,-1,0), v(-1,0,0), scale=5.0)
	# docking bay number
	text(params:1, v(-60,200,-35), v(0,-1,0), v(-1,0,0), scale=7.0)
	nozbias()

	geomflag(0x8020)
	invisible:tri(v(0,100,0), v(0,0,0), v(0,0,0))
	invisible:tri(v(0,0,0), v(-1,0,0), v(0,0,-1))
	geomflag(0)
}

model(spacestation_entry1_stage2, scale=1.0, radius=300.0) {
	a = v(-100,0,50)
	b = v(100,0,50)
	c = v(100,0,-50)
	d = v(-100,0,-50)
	a2 = v(-100,-200,50)
	b2 = v(100,-200,50)
	c2 = v(100,-200,-50)
	d2 = v(-100,-200,-50)
	material(.8,.8,.8, 0,0,0, 0, 0,0,0)
	quad(a,b,b2,a2)
	quad(c,d,d2,c2)
	quad(a2,b2,c2,d2)
	material(.8,.8,.5, 0,0,0, 0, 0,0,0)
	xref:quad(b,c,c2,b2)
	geomflag(0x8010)
	invisible:tri(v(0,-100,0), v(0,0,0), v(0,0,0))
	invisible:tri(v(0,0,0), v(-1,0,0), v(0,0,-1))
	geomflag(0)
	
	material(.8,0,0, 0,0,0, 0, 0,0,0)
	door2 = vlinear(v(0,0,0), v(0,0,-100), animfn=station_s2bay1)
	subobject(spacestation_door, door2, v(0,1,0), v(0,0,1), scale=1.0)

	subobject(spacestation_entry1_stage3, v(0,0,0), v(0,1,0), v(0,0,1), scale=1.0, onflag=station_s2bay1)
}

model(spacestation_entry1_stage1, scale=1.0, radius=400.0) {
	lod { full, 20px }
	a = v(-100,0,50)
	b = v(100,0,50)
	c = v(100,0,-50)
	d = v(-100,0,-50)
	a2 = v(-100,-300,50)
	b2 = v(100,-300,50)
	c2 = v(100,-300,-50)
	d2 = v(-100,-300,-50)
	
	material(.5,.5,.5, 0,0,0, 0, 0,0,0)
	xref:quad(b,c,c2,b2)
	quad(a,b,b2,a2)
	quad(c,d,d2,c2)
	
	# adverts
	lod1:subobject(var:17, v(-100,-200,0), v(0,0,-1), v(1,0,0), scale=40.0)
	lod1:subobject(var:18, v(100,-100,0), v(0,0,-1), v(-1,0,0), scale=40.0)
}

model(spacestation_entry1, scale=1.0, radius=200.0) {

	material(.2,.2,.6, 0,0,0, 0, 0,0,0)
	door1 = vlinear(v(0,-20,0), v(0,-20,-100), animfn=station_s1bay1)
	subobject(spacestation_door, door1, v(0,1,0), v(0,0,1), scale=1.0)
	
	subobject(spacestation_entry1_stage1, v(0,0,0), v(0,1,0), v(0,0,1), scale=1.0, onflag=station_s1bay1)
	# docking surface
	geomflag(0x10)
	invisible:quad(v(-100,-100,50), v(100,-100,50), v(100,-100,-50), v(-100,-100,-50))
	geomflag(0x8000)
	invisible:tri(v(0,-150,0), v(0,0,0), v(0,0,0))
	invisible:tri(v(0,0,0), v(-1,0,0), v(0,0,-1))
	geomflag(0)

	subobject(spacestation_entry1_stage2, v(0,-300,0), v(0,1,0), v(0,0,1), scale=1.0)

}

model(nice_spacestation, scale=1.0, radius=500.0) {
	# front
	# f7   f3    f6
	#
	#    a b
	# f4 d c   f2
	#
	# f8  f1    f5
	a = v(-100,400,50)
	b = v(100,400,50)
	c = v(100,400,-50)
	d = v(-100,400,-50)
	
	f1 = v(0,400,-400)
	f2 = v(400,400,0)
	f3 = v(0,400,400)
	f4 = v(-400,400,0)

	f5 = v(400,0,-400)
	f6 = v(400,0,400)
	f7 = v(-400,0,400)
	f8 = v(-400,0,-400)

	# back face points
	f1b = v(0,-400,-400)
	f2b = v(400,-400,0)
	f3b = v(0,-400,400)
	f4b = v(-400,-400,0)
	
	material(1.0,0.5,1.0, 0,0,0, 0, 0,0,0)
	textpos = v(0,400,-80)
	zbias(textpos,v(0,1,0),1)
	text(params:0, textpos, v(0,1,0), v(1,0,0), scale=10.0)
	nozbias()

	material(.5,.5,.5, 0,0,0, 0, 0,0,0)
	#front face
	tri(f1,d,c)
	xref:tri(f1,c,f2)
	xref:tri(f2,c,b)
	xref:tri(f2,b,f3)
	tri(f3,b,a)
	#pyramid sides
	xref:tri(f2,f3,f6)
	xref:tri(f5,f1,f2)
	xref:tri(f6,f3b,f2b)
	xref:tri(f5,f2b,f1b)
	xref:quad(f2,f6,f2b,f5) # sides
	quad(f3,f7,f3b,f6) # top
	quad(f5,f1b,f8,f1) # bottom
	quad(f1b,f2b,f3b,f4b) # rear
	subobject(spacestation_entry1, v(0,400,0), v(0,1,0), v(0,0,1), scale=1.0)
}

model(basic_groundstation, scale=1.0, radius=1.0) {
	material(.5,.5,.5, 0,0,0, 0, 0,0,0)
	# surface recognised for landing on (bay 1)
	geomflag(0x10)
	extrusion(v(0,0,-50), v(0,0,50), n(0,1,0), radius=1.0, {
		v(-50,0,0), v(50,0,0), v(50,10,0), v(-50,10,0)
	})
	geomflag(0x11)
	extrusion(v(0,0,70), v(0,0,170), n(0,1,0), radius=1.0, {
		v(-50,0,0), v(50,0,0), v(50,10,0), v(-50,10,0)
	})
	bay1top = v(0,10,0)
	bay2top = v(0,10,120)
	# docking bay 1 location,xaxis,yaxis
	geomflag(0x8000)
	invisible:tri(bay1top, v(0,0,0), v(0,0,0))
	invisible:tri(v(0,0,0), v(1,0,0), v(0,1,0))
	geomflag(0x8001)
	invisible:tri(bay2top, v(1,0,0), v(0,1,0))
	geomflag(0)
	material(1,1,1, 0,0,0, 0, 0,0,0)
	zbias(bay1top, v(0,1,0), 1)
	text("1", bay1top, v(0,1,0), v(1,0,0), scale=20.0)
	zbias(bay2top, v(0,1,0), 1)
	text("2", bay2top, v(0,1,0), v(1,0,0), scale=20.0)
	nozbias()
}

